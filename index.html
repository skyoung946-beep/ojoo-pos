<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ojoo Amisty Lounge - Elite POS</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --orange: #f39c12; --maroon: #800000; --bg: #0d0d0d; }
        body { font-family: 'Segoe UI', sans-serif; background: #050505; color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* Login Screen */
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 2000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(20px); }
        .login-card { background: #1a1a1a; padding: 40px; border-radius: 30px; border: 1px solid var(--orange); text-align: center; }
        input { padding: 15px; font-size: 20px; border-radius: 10px; border: none; width: 200px; text-align: center; margin-bottom: 20px; }
        
        /* Layout */
        .menu-side { flex: 2.5; padding: 20px; overflow-y: auto; }
        .status-side { flex: 1; background: #111; border-left: 2px solid #222; padding: 20px; display: flex; flex-direction: column; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px; }
        .item-btn { 
            background: white; color: black; border: none; padding: 15px; border-radius: 15px; 
            font-weight: bold; cursor: pointer; box-shadow: 0 5px 0 #ccc; transition: 0.1s;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .item-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #ccc; background: var(--orange); }
        
        .total-box { font-size: 40px; color: var(--orange); font-weight: 900; text-align: center; margin-bottom: 20px; }
        .owner-btn { background: #333; color: white; border: 1px solid #444; padding: 10px; border-radius: 10px; cursor: pointer; margin-top: auto; }
        
        /* Admin Panel */
        #admin-panel { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; height: 80%; background: #1a1a1a; z-index: 3000; border: 2px solid var(--orange); border-radius: 20px; padding: 20px; overflow-y: auto; }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-card">
            <h2>OJOO AMISTY LOUNGE</h2>
            <input type="password" id="pin-input" placeholder="Enter PIN">
            <br>
            <button onclick="checkPin()" style="padding: 10px 30px; background: var(--orange); border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">LOGIN</button>
        </div>
    </div>

    <div class="menu-side">
        <h2 id="category-title">Drinks Menu</h2>
        <div id="item-grid" class="grid"></div>
    </div>

    <div class="status-side">
        <div class="total-box">₵<span id="total-val">0.00</span></div>
        <div id="cart-list" style="flex-grow: 1; overflow-y: auto;"></div>
        <button onclick="clearCart()" style="background: #c0392b; color: white; border: none; padding: 15px; margin-bottom: 10px; border-radius: 10px; cursor: pointer;">CLEAR CART</button>
        <button onclick="openAdmin()" class="owner-btn">OWNER PANEL</button>
    </div>

    <div id="admin-panel">
        <h3>Admin Settings <button onclick="closeAdmin()" style="float:right">X</button></h3>
        <div id="admin-list"></div>
    </div>

    <script>
        // --- 1. CONFIGURATION ---
      const firebaseConfig = {
    apiKey: "AIza...", // You can find this in Firebase Project Settings
    projectId: "ojoo-lounge", 
    databaseURL: "https://ojoo-lounge-default-rtdb.firebaseio.com"
};
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let inventory = [
            { id: 1, name: "Fan Max", price: 10 },
            { id: 2, name: "Guinness Large", price: 30 },
            { id: 3, name: "Club Beer", price: 25 }
            // ... (Rest of your 130 drinks will be pulled from cloud or added here)
        ];
        let salesTotal = 0;

        // --- 2. THE HANDSHAKE (SYNC) ---
        function startSync() {
            db.ref('lounge_data').on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    inventory = data.inventory || inventory;
                    salesTotal = data.salesTotal || 0;
                    renderMenu();
                    document.getElementById('total-val').innerText = salesTotal.toFixed(2);
                } else {
                    // If DB is empty, push initial inventory
                    saveToCloud();
                }
            });
        }

        function saveToCloud() {
            db.ref('lounge_data').set({
                inventory: inventory,
                salesTotal: salesTotal
            });
        }

        // --- 3. LOGIC ---
        function checkPin() {
            const pin = document.getElementById('pin-input').value;
            if (pin === '1012') {
                document.getElementById('login-overlay').style.display = 'none';
                startSync();
            } else { alert("Wrong PIN"); }
        }

        function renderMenu() {
            const grid = document.getElementById('item-grid');
            grid.innerHTML = inventory.map(item => `
                <button class="item-btn" onclick="sellItem(${item.id})">
                    ${item.name}
                    <div style="font-size:12px; color: #666">₵${item.price}</div>
                </button>
            `).join('');
        }

        function sellItem(id) {
            const item = inventory.find(i => i.id === id);
            salesTotal += item.price;
            saveToCloud(); // Sync to other devices immediately
        }

        function clearCart() {
            salesTotal = 0;
            saveToCloud();
        }

        function openAdmin() { document.getElementById('admin-panel').style.display = 'block'; renderAdmin(); }
        function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; }

        function renderAdmin() {
            const list = document.getElementById('admin-list');
            list.innerHTML = inventory.map(item => `
                <div style="padding:10px; border-bottom:1px solid #333">
                    ${item.name} | Price: 
                    <input type="number" value="${item.price}" onchange="updatePrice(${item.id}, this.value)" style="width:60px; font-size:14px; margin:0">
                </div>
            `).join('');
        }

        function updatePrice(id, newPrice) {
            const item = inventory.find(i => i.id === id);
            item.price = parseFloat(newPrice);
            saveToCloud(); // Sync price change to all devices
        }

        // Start with empty menu until logged in
    </script>
</body>
</html>

